(this["webpackJsonpreact-typescript-starter-pack"]=this["webpackJsonpreact-typescript-starter-pack"]||[]).push([[0],{14:function(e,t,n){},18:function(e,t,n){"use strict";n.r(t);var o=n(1),c=n.n(o),i=n(8),a=n.n(i),l=(n(14),n(3)),d=n(9),r=n(2),u=n(0),s="https://mate.academy/students-api";function f(e){return new Promise((function(t){setTimeout(t,e)}))}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o={method:t};return n&&(o.body=JSON.stringify(n),o.headers={"Content-Type":"application/json; charset=UTF-8"}),f(300).then((function(){return fetch(s+e,o)})).then((function(e){if(!e.ok)throw new Error;return e.json()}))}var m,p=function(e){return j(e)},b=function(e,t){return j(e,"POST",t)},h=function(e,t){return j(e,"PATCH",t)},O=function(e){return j(e,"DELETE")},T=function(e,t){return h("/todos/".concat(e),t)},v=function(e){return O("/todos/".concat(e))},g=function(e){var t=e.todo,n=e.updateTitle,c=e.setEditingTodo,i=Object(o.useState)(t.title),a=Object(r.a)(i,2),l=a[0],d=a[1];return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),t.title!==l?n(t.id,l):(d(t.title),c(0))},children:Object(u.jsx)("input",{type:"text",className:"todo__title-field",placeholder:"Empty todo will be deleted",value:l,onChange:function(e){d(e.target.value)},onBlur:function(){t.title!==l?n(t.id,l):c(0)},onKeyUp:function(e){"Escape"===e.key&&(d(t.title),c(0))},autoFocus:!0})})})},C=function(e){var t=e.handleChangeCompleted,n=e.todo,o=e.deleteTodo,c=e.deleteTodoId,i=e.editingTodo,a=e.loadingTodo,l=e.handleDoubleClick,d=e.updateTitle,r=e.setEditingTodo,s=e.isLoadingCompleted,f=n.id,j=n.title,m=n.completed;return Object(u.jsxs)("div",{className:"todo ".concat(m&&"completed"),children:[Object(u.jsx)("label",{className:"todo__status-label",children:Object(u.jsx)("input",{type:"checkbox",className:"todo__status",checked:m,onChange:function(){return t(f,j)}})}),i===f?Object(u.jsx)(g,{updateTitle:d,setEditingTodo:r,todo:n}):Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"todo__title",onDoubleClick:function(){return l(f)},children:j}),Object(u.jsx)("button",{type:"button",className:"todo__remove",onClick:function(){return o(f)},children:"\xd7"})]}),Object(u.jsxs)("div",{className:"modal overlay\n      ".concat((!f||c===f||a===f||s)&&"is-active"),children:[Object(u.jsx)("div",{className:"modal-background has-background-white-ter"}),Object(u.jsx)("div",{className:"loader"})]})]})},x=function(e){var t=e.todos,n=e.handleChangeCompleted,o=e.handleDoubleClick,c=e.updateTitle,i=e.deleteTodo,a=e.setEditingTodo,l=e.tempTodo,d=e.deleteTodoId,r=e.editingTodo,s=e.loadingTodo,f=e.isLoadingCompleted;return Object(u.jsxs)(u.Fragment,{children:[t.map((function(e){return Object(u.jsx)(C,{handleChangeCompleted:n,handleDoubleClick:o,updateTitle:c,deleteTodo:i,setEditingTodo:a,editingTodo:r,todo:e,deleteTodoId:d,loadingTodo:s,isLoadingCompleted:f},e.id)})),l&&Object(u.jsx)(C,{todo:l,handleChangeCompleted:n,handleDoubleClick:o,updateTitle:c,deleteTodo:i,setEditingTodo:a,deleteTodoId:d,loadingTodo:s,editingTodo:+l,isLoadingCompleted:f})]})},_=n(4),k=n.n(_),N=function(e){var t=e.handleToggleAll,n=e.todos,c=e.addTodo,i=e.isDisabled,a=e.notCompletedTodosCount,l=Object(o.useState)(""),d=Object(r.a)(l,2),s=d[0],f=d[1];return Object(u.jsxs)("header",{className:"todoapp__header",children:[n.length>0&&Object(u.jsx)("button",{type:"button",className:k()("todoapp__toggle-all",{active:0===a}),onClick:t}),Object(u.jsx)("form",{onSubmit:function(e){e.preventDefault(),""!==s&&(c(s),f(""))},children:Object(u.jsx)("input",{type:"text",className:"todoapp__new-todo",placeholder:"What needs to be done?",value:s,onChange:function(e){var t=e.target;return f(t.value)},disabled:i})})]})};!function(e){e.All="All",e.Active="Active",e.Completed="Completed"}(m||(m={}));var y=function(e){var t=e.handleFilter,n=e.handleClearCompleted,o=e.activeFilter,c=e.completedTodosCount,i=e.notCompletedTodosCount;return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)("span",{className:"todo-count",children:"".concat(i," items left")}),Object(u.jsxs)("nav",{className:"filter",children:[Object(u.jsx)("a",{href:"#/".concat(m.All),className:k()("filter__link",{selected:o===m.All}),onClick:function(){return t(m.All)},children:m.All}),Object(u.jsx)("a",{href:"#/".concat(m.Active),className:k()("filter__link",{selected:o===m.Active}),onClick:function(){return t(m.Active)},children:m.Active}),Object(u.jsx)("a",{href:"#/".concat(m.Completed),className:k()("filter__link",{selected:o===m.Completed}),onClick:function(){return t(m.Completed)},children:m.Completed})]}),Object(u.jsx)("button",{type:"button",className:"todoapp__clear-completed",onClick:n,children:c>0&&"Clear completed"})]})},E=function(e){var t=e.error,n=e.setError;return Object(u.jsxs)("div",{className:k()("notification is-danger is-light has-text-weight-normal",{hidden:!t}),children:[Object(u.jsx)("button",{type:"button",className:"delete",onClick:function(){return n("")},children:"\u0445"}),t]})},A=6709,S=function(){var e=Object(o.useState)([]),t=Object(r.a)(e,2),n=t[0],c=t[1],i=Object(o.useState)(!1),a=Object(r.a)(i,2),s=a[0],f=a[1],j=Object(o.useState)(!1),h=Object(r.a)(j,2),O=h[0],g=h[1],C=Object(o.useState)(null),_=Object(r.a)(C,2),k=_[0],S=_[1],D=Object(o.useState)(0),I=Object(r.a)(D,2),w=I[0],F=I[1],U=Object(o.useState)(0),L=Object(r.a)(U,2),J=L[0],P=L[1],B=Object(o.useState)(m.All),G=Object(r.a)(B,2),H=G[0],K=G[1],M=Object(o.useState)(""),W=Object(r.a)(M,2),q=W[0],z=W[1],Q=Object(o.useState)(0),R=Object(r.a)(Q,2),V=R[0],X=R[1],Y=n.filter((function(e){return!e.completed})).length,Z=n.filter((function(e){return e.completed})).length;Object(o.useEffect)((function(){var e;(e=A,p("/todos?userId=".concat(e))).then((function(e){c(e)})).catch((function(){z("Unable to add a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}}))}),[]);var $=function(e){X(e),v(e).then((function(){var t=n.filter((function(t){return t.id!==e}));c(t),z("")})).catch((function(){z("Unable to delete a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){X(0)}))},ee=function(e,t){var n=e;switch(t){case m.Active:n=e.filter((function(e){return!e.completed}));break;case m.Completed:n=e.filter((function(e){return e.completed}));break;case m.All:}return n}(n,H);return Object(u.jsxs)("div",{className:"todoapp",children:[Object(u.jsx)("h1",{className:"todoapp__title",children:"todos"}),Object(u.jsxs)("div",{className:"todoapp__content",children:[Object(u.jsx)(N,{handleToggleAll:function(){n.forEach((function(e){f(!0),T(e.id,e).then((function(){var e=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{completed:!0})})),t=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{completed:!1})}));n.some((function(e){return!e.completed}))?c(e):c(t)})).catch((function(){z("Unable to update a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){f(!1)}))}))},todos:n,addTodo:function(e){if(e.trim()){F(0);var t={id:0,userId:A,title:e,completed:!1};S(t),g(!0),z(""),(n=A,o=t,b("/todos?userId=".concat(n),o)).then((function(e){c((function(t){return[].concat(Object(d.a)(t),[e])}))})).catch((function(){z("Unable to add a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){g(!1),S(null)}))}else z("Title can`t be empty"),setTimeout((function(){z("")}),3e3);var n,o},isDisabled:O,notCompletedTodosCount:Y}),Object(u.jsx)("section",{className:"todoapp__main",children:Object(u.jsx)(x,{todos:ee,handleChangeCompleted:function(e){var t=n.find((function(t){return t.id===e})),o=n.reduce((function(e,t){var n=t.title;return Object(l.a)(Object(l.a)({},e),{},{title:n})})),i={id:e,userId:A,title:o.title,completed:!1};P(e),T(e,i).then((function(o){var i=n.map((function(n){return n.id===e?Object(l.a)(Object(l.a)({},o),{},{completed:!(null===t||void 0===t?void 0:t.completed)}):n}));c(i)})).catch((function(){z("Unable to update a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){P(0)}))},deleteTodo:$,updateTitle:function(e,t){""===t.trim()&&$(e);var o={id:e,userId:A,title:t,completed:!1};P(e),F(0),T(e,o).then((function(e){var o=n.map((function(n){return n.id===e.id?Object(l.a)(Object(l.a)({},n),{},{title:t}):n}));c(o)})).catch((function(){z("Unable to update a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){P(0),z("")}))},handleDoubleClick:function(e){F(e)},setEditingTodo:F,tempTodo:k,deleteTodoId:V,editingTodo:w,loadingTodo:J,isLoadingCompleted:s})}),0!==n.length&&Object(u.jsx)("footer",{className:"todoapp__footer",children:Object(u.jsx)(y,{handleFilter:K,activeFilter:H,notCompletedTodosCount:Y,completedTodosCount:Z,handleClearCompleted:function(){n.forEach((function(e){e.completed&&(f(!0),v(e.id).then((function(){var e=n.filter((function(e){return!e.completed}));c(e)})).catch((function(){z("Unable to delete a todo");var e=setTimeout((function(){z("")}),3e3);return function(){clearTimeout(e)}})).finally((function(){return f(!1)})))}))}})})]}),q&&Object(u.jsx)(E,{error:q,setError:z})]})};n(16),n(17);a.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(S,{})}),document.getElementById("root"))}},[[18,1,2]]]);
//# sourceMappingURL=main.d251c3e2.chunk.js.map